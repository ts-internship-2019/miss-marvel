@model IEnumerable<iWasHere.Domain.Models.DictionaryCurrencyType>

    @{
    ViewData["Title"] = "Currency";
    }

    <h1 style="margin-left=90px">Currency Details</h1>

    <body>
        <p>
            <a asp-action="AddCurrency_Read">Filter</a>
        </p>




        <div class="demo-section k-content">
            <div>

                <p>

                    @(Html.Kendo().TextBox()
                  .Name("custom")
                  .HtmlAttributes(new { style = "width: 30%", title = "custom", id = "txtFilter" })
                    )

                    @(Html.Kendo().Button()
                            .Name("btnSubmit")
                            .HtmlAttributes(new { type = "button" })
                            .Content("Filter")
                            .Events(ev => ev.Click("DisplayData"))
                    )

                    @(Html.Kendo().Button()
                        .Name("btnSubmit2")
                        .HtmlAttributes(new { type = "button" })
                        .Content("Delete Filter")
                        .Events(ev => ev.Click("delFilters"))
                    )

                    @(Html.Kendo().Button()
                           .Name("btnSubmit1")
                           .HtmlAttributes(new { type = "button", title = "custom", id = "ADD" })
                           .Content("Add Currency")
                           .Events(e => e.Click("OpenNewWindow"))
                    )

                </p>
            </div>
        </div>

        @(Html.Kendo().Grid<iWasHere.Domain.Models.DictionaryCurrencyType>()
      .Name("grid")
      .HtmlAttributes(new { style = "height: 500px", id = "grdCurrencyType" })
      .Columns(columns =>
      {
          columns.Bound(c => c.CurrencyCode).Width(280);
          columns.Bound(c => c.CurrencyName).Width(280);
          columns.Bound(c => c.CurrencyExRate).Width(280);
          columns.Template("<button id=btnEdit onclick=EditCurrencyType(#=CurrencyTypeId#)>Edit</button>");
          columns.Template("<button id=btnDelete onclick=DeleteCurrencyType(#=CurrencyTypeId#)>Delete</button>");




      })

      .Scrollable()
      //.Groupable()
      .Sortable()
      .Filterable()
      .Pageable(pageable => pageable
          .Refresh(true)
          .PageSizes(true)
          .ButtonCount(5))
      .DataSource(dataSource => dataSource
          .Ajax()
          .Read(read => read.Action("GetCurrencies", "Dictionary").Data("myFunction"))
          .Update(update => update.Action("GetCurrencies", "Grid"))
      )
        )

        <script>
            function onClick(e) {
                $(e.event.target).closest(".k-button").attr("id");
                console.log("apasat");

            }

        </script>



    </body>

    <script>

        
    
       function deleteCurrency(id) {
            $.ajax({
                type: 'DELETE',
                url: '@Url.Action("DeleteCurrency", "Dictionary")',
                data: { id: id },
                success: function (response) {
                    $("#grdCurrency").data("kendoGrid").dataSource.read();
                },
                error: function (response) {


                }
            })
        }





    function DisplayData() {
        $("#grdCurrencyType").data("kendoGrid").dataSource.read()

    }

        function DisplayData1() {
        $("#grdCurrencyType").data("kendoGrid").dataSource.read()

    }

    function dgChange(e) {
        grid = $("#grdCurrencyType").data("kendoGrid");
        var row = e.currentTarget.closest("tr").cells[0].outerText;



    }

    function myFunction() {
        var filter = $("#txtFilter").val();
        var obj = {};
        obj["lFilter"] = filter;
        return obj;
        }

        function delFilters() {

                    $("#txtFilter").val(null);
         
                    $("#grdCurrencyType").data("kendoGrid").dataSource.read();
                    $("#grdCurrencyType").data("kendoGrid").dataSource.page(1);
                }
    
    function OpenNewWindow() {

             location.href = '@Url.Content("/Dictionary/AddDictionaryCurrencyType")';

               };

                        
    </script>


