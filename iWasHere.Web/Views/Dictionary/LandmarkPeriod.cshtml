
@model iWasHere.Domain.Models.DictionaryLandmarkPeriod

@{
    ViewData["Title"] = "LandmarkPeriod";

}
<!DOCTYPE html>
<h1>Perioada pentru vizita</h1>
<html>
<body>
    <p>

        @(Html.Kendo().TextBox()
          .Name("SearchBox")
          .HtmlAttributes(new { style = "width: 20%", title = "SearchBox", id = "txtSearchString" }))
        

        @(Html.Kendo().Button()
          .Name("textButton")
          .HtmlAttributes(new { type = "button" })
          .Content("Search")
          .Events(ev => ev.Click("DisplayData")))

        @(Html.Kendo().Button()
          .Name("Add")
          .HtmlAttributes(new { type = "button", title = "custom", id = "AddLandmarkPeriod" })
          .Content("Adauga")
        .Events(e => e.Click("redirectAddEditLMPeriod")))
    </p>

    @(Html.Kendo().Grid<iWasHere.Domain.Models.DictionaryLandmarkPeriod>
    ()
    .Name("LandmarkPeriodGrid")
    .Columns(columns =>
    {
        columns.Bound(c => c.LandmarkPeriodId).Hidden();
        columns.Bound(c => c.LandmarkPeriodName).Width(900).Title("Interval pentru vizite");
        columns.Template("<button id=\"btnDelete\" onclick=\"deleteLandmarkPeriod(#=LandmarkPeriodId#)\">Delete</button>");
        columns.Template("<button id=\"btnEdit\" onclick=\"editLandmarkPeriod(#=LandmarkPeriodId#)\" width:\"10\">Edit</button>");
        
        
    })
    .HtmlAttributes(new { style = "height: 500px;", id = "LandmarkPeriodGrid" })
    .Scrollable()
    .Sortable()
    .Pageable(pageable => pageable
    .Refresh(true)
    .PageSizes(true)
    .ButtonCount(5))
    .DataSource(dataSource => dataSource
    .Ajax()
    .Read(read => read.Action("LandmarkPeriod_Read", "Dictionary").Data("GetSearchBoxText"))
    )
    )


</body>
</html>
<script>
    
    function GetSearchBoxText() {
        var text = $("#txtSearchString").val();
        var obj = {};
        obj["search"] = text;
        return obj;
    }


    function DisplayData() {
        $("#LandmarkPeriodGrid").data("kendoGrid").dataSource.read()
    }

    function redirectAddEditLMPeriod() {

          location.href = '@Url.Content("/Dictionary/AddEditLandmarkPeriod")';
      };

    function editLandmarkPeriod(id) {
        grid = $("#grdLandmarkPeriodGrid").data("kendoGrid");
        window.location = '/Dictionary/AddEditLandmarkPeriod?id=' + id
       
        
 
    }


    function deleteLandmarkPeriod(id) {
             $.ajax({
                    type: 'DELETE',
                    url: '@Url.Action("DeletePeriod", "Dictionary")',
                    data: { id: id },
                 success: function () {
                        $("#LandmarkPeriodGrid").data("kendoGrid").dataSource.read();
                    },
                      
                })
    }


</script>


